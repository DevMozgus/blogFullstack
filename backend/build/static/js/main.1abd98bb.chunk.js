(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(e,n,t){e.exports=t(72)},71:function(e,n,t){},72:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(20),u=t.n(c),o=t(4),l=t(18),i=t(39),s=t(40),f=t(1),m=t.n(f),p=t(2),d=t(15),b=t.n(d),v="/api/blogs",g=null,h={getAll:function(){var e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(v);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createBlog:function(){var e=Object(p.a)(m.a.mark((function e(n){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:g}},e.next=3,b.a.post(v,n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),likeBlog:function(){var e=Object(p.a)(m.a.mark((function e(n,t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:g}},e.next=3,b.a.put("".concat(v,"/").concat(n),t,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),commentBlog:function(){var e=Object(p.a)(m.a.mark((function e(n,t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:g}},e.next=3,b.a.put("".concat(v,"/").concat(n,"/comments"),t,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),deleteBlog:function(){var e=Object(p.a)(m.a.mark((function e(n){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:g}},e.next=3,b.a.delete("".concat(v,"/").concat(n),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),setToken:function(e){g="bearer ".concat(e)}},E=function(e){return function(){var n=Object(p.a)(m.a.mark((function n(t){var r,a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=Object.assign({},e)).likes=e.likes+1,n.next=4,h.likeBlog(e.id,r);case 4:a=n.sent,t({type:"LIKE_BLOG",data:a});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},O=function(e){return function(){var n=Object(p.a)(m.a.mark((function n(t){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.commentBlog(e.id,e);case 2:r=n.sent,t({type:"COMMENT_BLOG",data:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},w=function(e){return function(){var n=Object(p.a)(m.a.mark((function n(t){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.deleteBlog(e.id);case 2:t({type:"REMOVE_BLOG",data:e});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},x=function(e){return function(){var n=Object(p.a)(m.a.mark((function n(t){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.createBlog(e);case 2:r=n.sent,t({type:"CREATE_BLOG",data:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"INIT_BLOGS":return n.data;case"LIKE_BLOG":var t=e.map((function(e){return e.id!==n.data.id?e:n.data}));return t;case"COMMENT_BLOG":var r=e.map((function(e){return e.id!==n.data.id?e:n.data}));return r;case"REMOVE_BLOG":var a=e.map((function(e){return e.id!==n.data.id?e:null}));return a;case"CREATE_BLOG":return e.concat(n.data);default:return e}},y=function(e){return function(n){n({type:"SET_NOTIFICATION",data:e})}},k=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(){var t=Object(p.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(y(e)),setTimeout((function(){return r(y(null))}),1e3*n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_NOTIFICATION":return n.data;case"CLEAR_NOTIFICATION":return null;default:return e}},T={login:function(){var e=Object(p.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},N=function(e){var n=e.username,t=e.password;return function(){var e=Object(p.a)(m.a.mark((function e(r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.login({username:n,password:t});case 2:a=e.sent,window.localStorage.setItem("loginUser",JSON.stringify(a)),h.setToken(a.token),r({type:"LOGIN_USER",data:a});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOGIN_USER":return n.data;case"RETURN_USER":return n.data?n.data:null;case"SIGNOUT_USER":return null;case"GET_USERS":return n.data;default:return e}},I={getAll:function(){var e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/users");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"INIT_USERS":return n.data;default:return e}},U=Object(l.combineReducers)({blogs:j,user:B,userbase:R,message:S}),_=Object(l.createStore)(U,Object(s.composeWithDevTools)(Object(l.applyMiddleware)(i.a))),A=t(6),L=t(10),F=t(5),C=t(7);function G(){var e=Object(A.a)(["\n  display: flex;\n  align-items: center;\n  align-content: flex-end;\n  margin-bottom: 7%;\n  justify-content: space-between;\n  a {\n    text-decoration: underline;\n    text-decoration-color: #e94560;\n  }\n"]);return G=function(){return e},e}function M(){var e=Object(A.a)(["\n  height: 5vw;\n  border-top: solid 2px;\n  border-color: #16213e;\n  margin-bottom: 7%;\n  display: flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n"]);return M=function(){return e},e}function P(){var e=Object(A.a)(["\n  width: 100%;\n\n  h3 {\n    color: white;\n  }\n"]);return P=function(){return e},e}function z(){var e=Object(A.a)(["\n  margin-right: 1em;\n"]);return z=function(){return e},e}var D=C.a.h4(z()),J=C.a.div(P()),K=C.a.div(M()),V=C.a.div(G()),W=function(){var e=Object(o.c)((function(e){return e.blogs})),n=Object(o.c)((function(e){return e.user})),t=e.sort((function(e,n){return n.likes-e.likes})),r=n?"/blogs/create":"/login";return a.a.createElement(a.a.Fragment,null,a.a.createElement(V,null,a.a.createElement(L.b,{to:r},"Make your own blog?")),t.map((function(e,n){var t="blogNum".concat(n);return a.a.createElement(K,{id:t,key:e.id},a.a.createElement(J,null,a.a.createElement(L.b,{to:"/blogs/".concat(e.id)},a.a.createElement("h3",null,e.title))),a.a.createElement(D,null,e.likes," like/s"),a.a.createElement(D,null,"By u/",e.user.username))})))},q=t(26),H=t(14),Q=function(e){var n=Object(r.useState)(""),t=Object(H.a)(n,2),a=t[0],c=t[1];return[{type:e,value:a,onChange:function(e){c(e.target.value)}},function(){c("")}]};function X(){var e=Object(A.a)(["\n  h5 {\n    color: white;\n  }\n  b {\n    text-decoration: underline;\n    text-decoration-color: #0f3460;\n  }\n\n  form {\n    display: flex;\n    flex-direction: column;\n  }\n\n  button {\n    width: 20%;\n    margin-top: 15px;\n  }\n\n  ul {\n    list-style-type: none;\n  }\n\n  ul li {\n    border: solid 1px;\n    border-radius: 4px;\n    border-color: #0f3460;\n    margin: 1em;\n    padding: 1em;\n    display: flex;\n    flex-direction: column;\n  }\n\n  p {\n    margin-left: 1em;\n  }\n\n  label {\n    color: rgba(255, 255, 255, 0.5);\n  }\n"]);return X=function(){return e},e}var Y=C.a.div(X()),Z=function(e){var n=e.blog,t=Q("text"),r=Object(H.a)(t,2),c=r[0],u=r[1],l=Object(o.b)(),i=function(){var e=Object(p.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r={comments:n.comments.concat(c.value)},e.next=5,l(O(Object(q.a)(Object(q.a)({},n),r)));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:u();case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n){return e.apply(this,arguments)}}(),s=Object(o.c)((function(e){return e.user}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(Y,null,a.a.createElement("h5",null,"Comment as ",a.a.createElement("b",null,s.username)),a.a.createElement("form",{onSubmit:i},a.a.createElement("input",Object.assign({placeholder:"Enter your comment...",name:"Comment",id:"comment"},c)),a.a.createElement("button",{className:"importantButton",id:"submit-comment",type:"submit"},"Submit Comment")),n.comments?a.a.createElement("ul",null,n.comments.map((function(e,n){return a.a.createElement("li",{key:n},a.a.createElement("label",null,"Anon"),a.a.createElement("p",null,e))}))):null))};function $(){var e=Object(A.a)(["\n  p {\n    color: white;\n  }\n\n  div {\n    border-top: solid 2px;\n    padding-top: 5px;\n    border-color: #0f3460;\n  }\n  button {\n    margin-right: 15px;\n    border: none;\n  }\n  button:hover {\n    background-color: rgba(0, 0, 0, 0);\n    text-decoration: underline;\n    text-decoration-color: #e94560;\n  }\n"]);return $=function(){return e},e}var ee=C.a.div($()),ne=function(){var e=Object(o.b)(),n=Object(F.g)().id,t=Object(o.c)((function(e){return e.blogs})),r=t.find((function(e){return e.id===n})),c=function(){var n=Object(p.a)(m.a.mark((function n(t){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{e(E(r))}catch(t){e(k({error:"Failed to update blog",err:t},3))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),u=function(){var n=Object(p.a)(m.a.mark((function n(r,a){var c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("Remove blog '".concat(a,"'?")))try{c=t.find((function(e){return e.id===r})),e(w(c))}catch(u){e(k({error:"Failed to delete blog",err:u},3))}case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),l=Object(o.c)((function(e){return e.user}));return r?a.a.createElement(a.a.Fragment,null,a.a.createElement(ee,null,a.a.createElement("h3",null,r.title),a.a.createElement("p",null,"Author: ",r.author),a.a.createElement("p",null,"Link: ",r.url),a.a.createElement("p",null,"Likes: ",r.likes),a.a.createElement("div",null,l?a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return c(r.id)}},"like")):null,l&&(l.username===r.user.username||r.user)?a.a.createElement("button",{onClick:function(){return u(r.id,r.title)}},"delete"):null)),a.a.createElement(Z,{blog:r})):null};function te(){var e=Object(A.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1%;\n  align-items: flex-start;\n  justify-content: space-between;\n\n  label {\n    color: white;\n    margin-bottom: 2px;\n  }\n"]);return te=function(){return e},e}function re(){var e=Object(A.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-between;\n  margin-top: 5%;\n  height: 100%;\n"]);return re=function(){return e},e}var ae=C.a.form(re()),ce=C.a.div(te()),ue=function(){var e=Q("text"),n=Object(H.a)(e,2),t=n[0],r=n[1],c=Q("password"),u=Object(H.a)(c,2),l=u[0],i=u[1],s=Object(F.f)(),f=Object(o.b)(),d=function(){var e=Object(p.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{a={username:t.value,password:l.value},f(N(a)),i(),r(),f(k({success:"Successful Login"})),s.push("/")}catch(c){f(k({error:"Login Failed",err:c}))}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement(ae,{onSubmit:d},a.a.createElement(ce,null,a.a.createElement("label",null,"Username"),a.a.createElement("br",null),a.a.createElement("input",Object.assign({placeholder:"Enter Username"},t,{id:"username",name:"Username"}))),a.a.createElement(ce,null,a.a.createElement("label",null,"Password"),a.a.createElement("br",null),a.a.createElement("input",Object.assign({placeholder:"Enter Password",id:"password",name:"Password"},l))),a.a.createElement("button",{className:"importantButton",type:"submit"},"continue")))},oe=function(){var e=Object(o.c)((function(e){return e.userbase}));return e?a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"Users"),e.map((function(e,n){var t=e.blogs.length;return a.a.createElement("p",{key:n},a.a.createElement(L.b,{to:"/users/".concat(e.id)},e.username," created ",t," blogs"))}))):null},le=function(){var e=Object(F.g)().id,n=Object(o.c)((function(e){return e.userbase})).find((function(n){return n.id===e}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,n.username),a.a.createElement("ul",null,n.blogs.map((function(e,n){return a.a.createElement("li",{key:n},e.title)}))))};t(71);function ie(){var e=Object(A.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 50%;\n  align-items: flex-start;\n  justify-content: space-between;\n\n  div {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 1vw;\n    color: white;\n  }\n\n  input {\n    margin-top: 2px;\n  }\n"]);return ie=function(){return e},e}var se=C.a.div(ie()),fe=function(){var e=Q("text"),n=Object(H.a)(e,2),t=n[0],r=n[1],c=Q("text"),u=Object(H.a)(c,2),l=u[0],i=u[1],s=Q("text"),f=Object(H.a)(s,2),d=f[0],b=f[1],v=Object(o.b)(),g=function(){var e=Object(p.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a={title:t.value,author:l.value,url:d.value,likes:0};try{v(x(a)),v(k({success:"Successfuly added blog!"},3))}catch(c){v(k({error:"Blog entry failed",err:c}))}r(),i(),b();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"New Blog Entry"),a.a.createElement("form",{onSubmit:g},a.a.createElement(se,null,a.a.createElement("div",null,"Author",a.a.createElement("input",Object.assign({placeholder:"Enter Post Author",name:"Author",id:"author"},l))),a.a.createElement("div",null,"Title",a.a.createElement("input",Object.assign({placeholder:"Enter Post Title",name:"Title",id:"title"},t))),a.a.createElement("div",null,"Url",a.a.createElement("input",Object.assign({placeholder:"Enter Post URL",name:"Url",id:"url"},d))),a.a.createElement("button",{className:"importantButton",id:"submit-blog",type:"submit"},"Submit"))))};function me(){var e=Object(A.a)(["\n  background-color: #0f3460;\n  height: 0.3em;\n  width: 100%;\n"]);return me=function(){return e},e}function pe(){var e=Object(A.a)(['\n  color: rgba(250, 250, 250, 80%);\n  background-color: #16213e;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin-bottom: 2em;\n  font-family: "Syne", sans-serif;\n']);return pe=function(){return e},e}function de(){var e=Object(A.a)(['\n  margin-left: 25%;\n  margin-right: 25%;\n  font-family: "Roboto", sans-serif;\n']);return de=function(){return e},e}function be(){var e=Object(A.a)(["\n  margin-right: 25%;\n  flex-basis: 15%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return be=function(){return e},e}function ve(){var e=Object(A.a)(["\n  margin-left: 25%;\n  font-size: 1.5em;\n  color: rgba(255, 255, 255, 0.9);\n"]);return ve=function(){return e},e}var ge=function(){var e=Object(o.c)((function(e){return e.user})),n=Object(o.b)();return a.a.createElement(we,null,a.a.createElement(he,null,"Blog App"),a.a.createElement(Ee,null,a.a.createElement(L.b,{className:"link",to:"/blogs"},"blogs"),a.a.createElement(L.b,{className:"link",to:"/users"},"users"),e?a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){n(function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.clear();case 2:n({type:"SIGNOUT_USER"});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}},"logout")):a.a.createElement(L.b,{id:"login",className:"link",to:"/login"},"login")))},he=C.a.h1(ve()),Ee=C.a.div(be()),Oe=C.a.div(de()),we=C.a.div(pe()),xe=C.a.div(me()),je=function(){var e=Object(o.b)();return Object(r.useEffect)((function(){e(function(){var e=Object(p.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:t=e.sent,n({type:"INIT_BLOGS",data:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(m.a.mark((function e(n){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=window.localStorage.getItem("loginUser"))&&(r=JSON.parse(t),h.setToken(r.token),n({type:"RETURN_USER",data:r}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getAll();case 2:t=e.sent,n({type:"INIT_USERS",data:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[e]),a.a.createElement(a.a.Fragment,null,a.a.createElement(L.a,null,a.a.createElement(xe,{id:"line"}),a.a.createElement(ge,null),a.a.createElement(Oe,null,a.a.createElement(F.c,null,a.a.createElement(F.a,{path:"/blogs/create"},a.a.createElement(fe,null)),a.a.createElement(F.a,{path:"/login"},a.a.createElement(ue,null)),a.a.createElement(F.a,{path:"/blogs/:id"},a.a.createElement(ne,null)),a.a.createElement(F.a,{path:"/blogs"},a.a.createElement(W,null)),a.a.createElement(F.a,{path:"/users/:id"},a.a.createElement(le,null)),a.a.createElement(F.a,{path:"/users"},a.a.createElement(oe,null)),a.a.createElement(F.a,{path:"/"},a.a.createElement(W,null))))))};u.a.render(a.a.createElement(o.a,{store:_},a.a.createElement(je,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.1abd98bb.chunk.js.map